{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nconst gallery = document.querySelector(\".gallery\");\n\n\n\nconst lightbox = new SimpleLightbox('.gallery a', {          \n    captionsData: 'alt'             \n  });   \n\nexport const renderHTML = {\n    render\n};\n\n\nfunction render(data) {\n    const markup = data.hits.map(e => `<div>\n        <a href=\"${e.largeImageURL}\" class=\"image-link\">\n                <img src=\"${e.webformatURL}\" class=\"image\" alt=\"${e.tags}\" title=\"${e.tags}\" />\n                <div class=\"data\">\n                    <div>\n                        <h2 class=\"data-image\">Likes</h2>\n                        <span class=\"data-quantity\">${e.likes}</span>\n                    </div>\n                    <div>\n                        <h2 class=\"data-image\">Views</h2>\n                        <span class=\"data-quantity\">${e.views}</span>\n                    </div>\n                    <div>\n                        <h2 class=\"data-image\">Comments</h2>\n                        <span class=\"data-quantity\">${e.comments}</span>\n                    </div>\n                    <div>\n                        <h2 class=\"data-image\">Downloads</h2>\n                        <span class=\"data-quantity\">${e.downloads}</span>\n                    </div>\n                </div>\n        </a></div>\n    `).join(\"\");\n\n    gallery.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport axios from 'axios';\n\nimport { renderHTML } from './render-functions';\n\nconst loader = document.querySelector(\".loader\")\nconst loadButton = document.querySelector(\".load-button\");\nconst secondLoader = document.querySelector(\"#second-loader\");\n\n\nconst url = `https://pixabay.com/api/`;\nconst API_KEY = '46290930-3746f5b7b54e4eb8c1145cc43';\n\nlet page = 1;\nconst perPage = 15;\nlet inputText = '';\nlet totalHits = 0;\n\n\n\nasync function getImages(text, isNewSearch = false) {\n\n    if (isNewSearch) {\n        page = 1;\n    }\n\n    console.log(`Fetching images for: \"${text}\", page: ${page}`); \n\n    try {\n        const response = await axios.get(url, {\n            params: {\n                key: API_KEY,\n                q: inputText,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                page: page,\n                per_page: perPage\n            } \n        }); \n\n\n        console.log(`Response received for page: ${page}`); \n        totalHits = response.data.totalHits;\n        page++;\n        return response.data; \n    } catch (error) {\n        console.error('Ошибка:', error);\n        throw error; \n    }\n}\n\n\n\n\nfunction handleImages(text, isNewSearch = false) {\n\n    console.log(`Handling images for: \"${text}\", isNewSearch: ${isNewSearch}`);\n    inputText = text;\n    const gallery = document.querySelector('.gallery');\n    loader.classList.add(\"visible\");\n\n\n\n    console.log(`Handling images for: \"${text}\", isNewSearch: ${isNewSearch}`); \n    getImages(inputText, isNewSearch)\n        .then(data => {\n\n            if (isNewSearch) {\n                gallery.innerHTML = '';\n            }\n\n\n            if (data.hits.length === 0) {\n                iziToast.show({\n                    color: 'red',\n                    message: \"Sorry, there are no images matching your search query. Please try again!\",\n                    position: \"topRight\"\n                });\n\n                loadButton.classList.add('invisible');\n                return;\n            }\n            \n            console.log(`Rendering ${data.hits.length} images`);\n            renderHTML.render(data);\n\n\n            if (data.hits.length > 0) {\n                if (totalHits > (page - 1) * perPage) {\n                    loadButton.classList.add('visible');\n                } else {\n                    loadButton.classList.add('invisible');\n                    iziToast.show({\n                        color: 'info',\n                        message: \"Извините, но вы достигли конца результатов поиска.\",\n                        position: \"topRight\"\n                    });\n                }\n            } else {\n                loadButton.classList.add('invisible');\n            }\n            \n        })\n        .catch(error => {\n            iziToast.show({\n                color: 'red',\n                message: \"An error occurred during the request.\",\n                position: \"topRight\"\n            });\n        })\n        .finally(() => {\n            loader.classList.remove(\"visible\");\n        });\n}\n\nloadButton.addEventListener('click', () => {\n    loadButton.classList.add('invisible')\n    console.log('Load More clicked');\n\n    console.log(`Current inputText before loading more: \"${inputText}\"`);\n    \n    loadButton.disabled = true; \n    handleImages(inputText, false); \n});\n\n\n\nexport const imageFetcher = {\n    handleImages\n};\n\n\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { imageFetcher } from './js/pixabay-api';\n\n\nconst form = document.querySelector(\".form\")\nconst formInput = document.querySelector(\".form-input\")\n\n\n\n\n\nform.addEventListener(\"submit\", (e) => {\n\n    e.preventDefault();\n\n    const inputText = formInput.value.trim();\n\n    if (inputText === \"\" ) {\n        iziToast.show({\n            color: 'white',\n            message: `Please fill the input`,\n            position: \"topRight\"\n          })\n    } else {\n        imageFetcher.handleImages(inputText, true)\n    }\n    \n    form.reset()\n})"],"names":["gallery","lightbox","SimpleLightbox","renderHTML","render","data","markup","loader","loadButton","url","API_KEY","page","perPage","inputText","totalHits","getImages","text","isNewSearch","response","axios","error","handleImages","iziToast","imageFetcher","form","formInput","e"],"mappings":"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"}